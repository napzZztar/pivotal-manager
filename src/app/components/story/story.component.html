<mat-expansion-panel (opened)="story.expanded = true"
                     (closed)="story.expanded = false" [hideToggle]="true">
  <mat-expansion-panel-header class="story-item">
    <mat-panel-description style="margin-right: 0">
      <mat-checkbox (click)="$event.stopPropagation()" [(ngModel)]="story.isEnabled"></mat-checkbox>
      &nbsp;<mat-icon class="story-icon">{{statusMap[story.currentState]}}</mat-icon>
      &nbsp;<mat-icon class="story-icon">{{typeMap[story.storyType]}}</mat-icon>
      &nbsp;<mat-icon class="story-icon">{{numberMap[story.estimate] || 'not_interested'}}</mat-icon>
      &nbsp;<b>{{story.expanded ? story.projectName : getAbbvr(story.projectName)}}</b>
      <span *ngIf="!story.expanded" [matTooltip]="story.name" [matTooltipDisabled]="story.name.length < 30">&nbsp;#{{story.id}} {{getShortForm(story.name)}}</span>
    </mat-panel-description>
  </mat-expansion-panel-header>
  <mat-list>
    <mat-divider [inset]="true"></mat-divider>
    <mat-list-item>
      #{{story.id}} - {{story.name}}
    </mat-list-item>
    <mat-divider *ngIf="story?.labels?.length" [inset]="true"></mat-divider>
    <mat-list-item *ngIf="story?.labels?.length">
      <mat-chip-list>
        <mat-chip *ngFor="let label of story.labels">{{label.name}}</mat-chip>
      </mat-chip-list>
    </mat-list-item>
    <mat-divider [inset]="true"></mat-divider>
    <mat-list-item>
      <button mat-icon-button (click)="openSnackBar('Copied: ' + copyText('#'+story.id), 'Close')">
        <b style="font-size: x-large">#</b>
      </button>
      <button mat-icon-button (click)="openSnackBar('Copied: ' + copyText(story.url), 'Close')">
        <mat-icon>link</mat-icon>
      </button>
      <button mat-icon-button (click)="openSnackBar('Copied: ' + copyBranchName(story), 'Close')">
        <mat-icon>call_split</mat-icon>
      </button>
    </mat-list-item>

  </mat-list>
</mat-expansion-panel>
